![image-20230621143706893](./Redis.assets/image-20230621143706893.png)

## 缓存中间件

### Memcache和Redis的区别

| 特性           | Redis                  | Memcache         |
| :------------- | :--------------------- | :--------------- |
| 支持的数据类型 | 数据类型丰富           | 简单数据对象     |
| 数据持久化     | 支持数据磁盘持久化存储 | 不支持数据持久化 |
| 主从复制       | 支持主从复制           | 不支持主从复制   |
| 分片           | 支持分片               | 不支持分片       |

### Redis为什么快

Redis可以做到100000+QPS（每秒十万+的查询次数）

原因：

- 完全基于内容，绝大多数请求是纯粹的内存操作，执行效率高
- 数据结构简单，对数据操作也简单
- 采用单线程，单线程也能处理高并发请求，想多核也可启动多实例
- 使用多路IO复用模型，非阻塞IO

### 多路IO复用模型

FD：文件描述符，一个打开的文件通过唯一的描述符进行引用，该描述符是打开文件的元数据到文件本身的映射

传统的阻塞IO模型

> 传统的阻塞IO模型是一种同步IO模型，它的工作方式是当应用程序向操作系统请求IO操作时，操作系统会一直等待，直到IO操作完成并返回结果，期间应用程序会被阻塞（即停止运行），无法执行其他任务。在这种模型下，当应用程序需要进行多个IO操作时，必须等待前一个IO操作完成后才能进行下一个IO操作，因此IO操作的效率较低，尤其是在需要进行大量IO操作时，会严重影响应用程序的性能。

多路复用模型

Redis采用的IO多路复用函数：epoll / kqueue / evport / select

如何选用：

- 因地制宜
- 优先选择时间复杂度为O(1)的IO多路复用函数作为底层实现
- 以时间复杂度为O(n)的select作为保底
- 基于react设计模式监听IO事件

### Redis常用数据类型

